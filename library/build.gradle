apply plugin: 'com.android.library'
apply plugin: 'dist'

android {

    publishNonDefault true

    sourceSets {
        main {
            manifest.srcFile 'main/AndroidManifest.xml'
            java.srcDirs = ['main/src']
            resources.srcDirs = ['main/src']
            res.srcDirs = ['main/res']
        }

        productFlavors {
            // Platform version that will not include the compatibility libraries
            platform {
                minSdkVersion 21
            }

            // Compatibility build that provides the L layout for SDK versions ICS+
            icsCompat {
                minSdkVersion 14
                dependencies {
                    icsCompatCompile project(':support-appcompat-v7')
                }
            }

            // Compatibility build that provides the L layout for SDK versions Eclair MR1+
            eclairMr1Compat {
                minSdkVersion 7
                dependencies {
                    eclairMr1CompatCompile project(':support-appcompat-v7')
                }
            }
        }

        platform {
            res.srcDirs = ['platform/res']
        }

        icsCompat {
            res.srcDirs = ['eclair-mr1/res']
        }

        eclairMr1Compat {
            res.srcDirs = ['eclair-mr1/res']
        }

        androidTest {
            manifest.srcFile 'test/AndroidManifest.xml'
            java.srcDirs = ['test/src']
            res.srcDirs = ['test/res']
        }
    }
}
